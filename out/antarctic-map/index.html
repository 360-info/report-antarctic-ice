<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.542">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="There’s more to Antarctica than the ice you see on the maps.">

<title>Interactive: exploring Antarctica’s ice</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
.display.math{display: block; text-align: center; margin: 0.5rem auto;}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script type="module" src="../site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="../site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">


<link rel="stylesheet" href="_extensions/360-info/360-embed/embed.css">
<link rel="stylesheet" href="_extensions/360-info/360-embed/modal.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.2/font/bootstrap-icons.css">
<meta property="og:title" content="Interactive: exploring Antarctica’s ice">
<meta property="og:description" content="There’s more to Antarctica than the ice you see on the maps.">
<meta property="og:image" content="/antarctic-map/antarcticmap-banner.png">
<meta name="twitter:title" content="Interactive: exploring Antarctica’s ice">
<meta name="twitter:description" content="There’s more to Antarctica than the ice you see on the maps.">
<meta name="twitter:image" content="/antarctic-map/antarcticmap-banner.png">
<meta name="twitter:site" content="@360info_global">
<meta name="twitter:card" content="summary_large_image">
</head>

<body>





<div class="modalpanel">
<div class="modalpanelitems">
<!-- check https://icons.getbootstrap.com for icons! -->

<a href="#" data-micromodal-trigger="modal-useremix" aria-label="Share dialog" role="button" tabindex="0">
  <i class="bi bi-share-fill"></i>
</a>

<a href="#" data-micromodal-trigger="modal-about" aria-label="More information" role="button" tabindex="0">
  <i class="bi bi-info-circle-fill"></i>
</a>

<a id="fullscreenButton" aria-label="Fullscreen" role="button" href="#" tabindex="0">
  <span class="fsoff">
    <i class="bi bi-arrows-fullscreen"></i>
  </span>
</a>

<!-- full screen button script -->
<script>
  window.addEventListener("load", () => {
    document.querySelector("#fullscreenButton").addEventListener("click", e => {
      e.preventDefault();
      console.log("FS button clicked!");

      var fsBtn = document.querySelector("#fullscreenButton");

      if (fsBtn.classList.contains("fsmode")) {
        // fullscreen is on: disable it
        document.exitFullscreen();
        fsBtn.classList.remove("fsmode")
      } else {
        // fullscreen is off: enable it
        var rootEl = document.documentElement;

        var requestMethod =
          rootEl.requestFullScreen ||
          rootEl.webkitRequestFullScreen ||
          rootEl.mozRequestFullScreen ||
          rootEl.msRequestFullScreen;

          if (requestMethod) {
            requestMethod.call(rootEl);
            fsBtn.classList.add("fsmode");
          } else {
            alert("Fullscreen mode isn't supported on this browser.")
          }
      }
    });
  })
</script>
</div>
<!-- if there's room here, put credits on two lines:
  * Editor names, 360info (hint: put &shy; in the middle of long names!)
  * Data: ORG
  (if there isn't room, put it in the ABOUT dialog) -->
<p>James Goldie, 360info</p>
<p>Data: Bedmap2, NSIDC</p>
</div>
<!-- finally, here's the EDITOR SHARE button. it's a quick way to copy the
     embed code for editors and will only appear if ?edshare=true is in the
     url (that way it'll appear on the newswire but not subsequent shares) -->
<div id="edshare">
  <i id="edshare-icon" class="bi bi-clipboard2-plus-fill"></i>
  <div>
    <h4 id="edshare-title" class="anchored">Get this map</h4>
    <p id="edshare-description">Click to copy this into your story</p>
  </div>
</div>
<!-- editor share banner: enable if ?edshare is in the url -->
<script>
  window.addEventListener("load", () => {
    pageURL = new URL(window.location.href);
    edshare = pageURL.searchParams.get("edshare");
    
    edshareBtn = document.querySelector("#edshare");
    if (edshare === null) {
      edshareBtn.style.display = "none";
    } else {
    
      edshareBtn.classList.add("ready");
    
      edshareBtn.addEventListener("click", () => {

        // get potential url fragments to add to embed code
        const pageURL = new URL(window.location.href)
        const potentialFragments =
          `?meta:360embed.fragments`.split(/,\s?/)
        let fragments = []
        if (potentialFragments == null) {
          return ""
        }

        potentialFragments.forEach(fragmentKey => {
          const fragmentValue = pageURL.searchParams.get(fragmentKey)
          if (fragmentValue != null) {
            fragments.push(fragmentKey + "=" + fragmentValue)
          }
        })
        const fragmentString = "?" + fragments.join("&");

        // copy the embed code to the clipboard
        navigator.clipboard.writeText(
          `<div style="aspect-ratio: 13 / 20; width: 100%; min-height: 500px;  max-height: 893px;"><iframe  allow="fullscreen; clipboard-write self https://bushfire-seasons.360visuals.org" allowfullscreen="true" src="https://antarcticamap.360visuals.org/antarctic-map/${fragmentString}" title="Interactive: exploring Antarctica’s ice"  style="width:100%; height:100%; position: relative; top: 0; left: 0; border:none; background-color: white;" scrolling="no"></iframe></div>`);

        // update button styles and content
        edshareBtn.classList.remove("ready");
        edshareBtn.classList.add("clicked");

        edshareIcon = document.querySelector("#edshare-icon");
        edshareIcon.removeAttribute("class");
        edshareIcon.classList.add("bi");
        edshareIcon.classList.add("bi-check");

        edshareTitle = document.querySelector("#edshare-title");
        edshareTitle.innerText = "COPIED!";

        edshareDescription = document.querySelector("#edshare-description");
        edshareDescription.innerHTML =
          `Paste this with the <i class="bi bi-code-square"></i> Embed button in your story editor.</br></br>
          
          Please remember to <strong>attribute 360info and our data sources.</strong>`

        // button exit animation
        setTimeout(() => {  edshareBtn.classList.add("done"); }, 5000);
        setTimeout(() => {  edshareBtn.style.display = "none"; }, 7000);
      });
    }
  });
</script>
<!-- geotiff in observable plot:
// https://observablehq.com/@neocartocnrs/display-and-project-a-geotiff-with-plot -->
<div id="load-data" class="cell">
<div class="sourceCode cell-code hidden" id="cb1" data-startfrom="41" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 40;"><span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>turf <span class="op">=</span> <span class="pp">require</span>(<span class="st">"@turf/turf@6.5.0"</span>)</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>FA <span class="op">=</span> FileAttachment</span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a><span class="co">// use turf.js to make the geojson winding order compatible with d3.js</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">fixedGeoJSON</span>(x) {</span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> raw <span class="op">=</span> <span class="cf">await</span> <span class="fu">FA</span>(x)<span class="op">.</span><span class="fu">json</span>()</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>  raw<span class="op">.</span><span class="at">features</span> <span class="op">=</span> raw<span class="op">.</span><span class="at">features</span><span class="op">.</span><span class="fu">map</span>(<span class="kw">function</span>(f) {</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> turf<span class="op">.</span><span class="fu">rewind</span>(f<span class="op">,</span> { <span class="dt">reverse</span><span class="op">:</span><span class="kw">true</span> })<span class="op">;</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> raw</span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a><span class="co">// bedHeights = fixedGeoJSON("/data/bedmap2/bedmap2_bed_heights.geojson")</span></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>bedHeights <span class="op">=</span> <span class="fu">FA</span>(<span class="st">"/data/bedmap2/bedmap2_bed_heights.geojson"</span>)<span class="op">.</span><span class="fu">json</span>()</span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>landIceOutline <span class="op">=</span> <span class="fu">fixedGeoJSON</span>(<span class="st">"/data/bedmap2/bedmap2_surface_outline.geojson"</span>)</span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a><span class="co">// seaIceOutline = fixedGeoJSON("/data/nsidc/seaice_median.geojson")</span></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>glacierPoints <span class="op">=</span> <span class="fu">FA</span>(<span class="st">"/data/nsidc/glaciers-antarctica.csv"</span>)<span class="op">.</span><span class="fu">csv</span>()</span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>seaIceRegions <span class="op">=</span> <span class="fu">FA</span>(<span class="st">"/data/nsidc/seaice_median_hulls.geojson"</span>)<span class="op">.</span><span class="fu">json</span>()</span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a><span class="co">// filter the sea ice regions on a timer</span></span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>currentSeaIceRegion <span class="op">=</span> ({</span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>  <span class="op">...</span>seaIceRegions<span class="op">,</span></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>  <span class="dt">features</span><span class="op">:</span> seaIceRegions<span class="op">.</span><span class="at">features</span><span class="op">.</span><span class="fu">filter</span>(</span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>      d <span class="kw">=&gt;</span> <span class="pp">parseInt</span>(d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">month</span>) <span class="op">==</span> monthTimer <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="load-data-1">
<div id="ojs-cell-1-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="load-data-2">
<div id="ojs-cell-1-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="load-data-3">
<div id="ojs-cell-1-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="load-data-4">
<div id="ojs-cell-1-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="load-data-5">
<div id="ojs-cell-1-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="load-data-6">
<div id="ojs-cell-1-6" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="load-data-7">
<div id="ojs-cell-1-7" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="load-data-8">
<div id="ojs-cell-1-8" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="header-block">
<div id="commentary" class="cell commentary">
<div class="sourceCode cell-code hidden" id="cb2" data-startfrom="73" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 72;"><span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a>comments <span class="op">=</span> [</span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a>    <span class="fu">md</span><span class="vs">`When you think of Antarctica, you probably think of its ice. But underneath is a continent, with rock rising above sea level.`</span><span class="op">,</span></span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a>    <span class="fu">md</span><span class="vs">`A sheet of ice sits over nearly all of the land, as well as some of the shallow waters — kilometres thick in many places.`</span><span class="op">,</span></span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a>    <span class="fu">md</span><span class="vs">`The massive ice sheet isn’t still—it very slowly flows into the sea in rivers called glaciers.&lt;br&gt;&lt;br&gt;NASA says that melting of the ice sheets has contributed to one third of the sea rise we've seen since 1993.`</span><span class="op">,</span></span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a>    <span class="fu">md</span><span class="vs">`Most of the melt currently comes from areas where part of the ice sheet sits over the ocean, as a bookshelf hangs onto a wall.&lt;br&gt;&lt;br&gt;This is called an ice shelf. Ice shelves often act as plugs, holding glaciers in.`</span><span class="op">,</span></span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a>    <span class="fu">md</span><span class="vs">`Ross Ice Shelf and Ronne Ice Shelf are two of the biggest, but smaller ones hang all around the edge of Antarctica.`</span><span class="op">,</span></span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a>    <span class="fu">md</span><span class="vs">`Modelling has found that glacial ice flowing into the Amundsen Sea is vulnerable to warming, and that its melt could destabilise larger areas.&lt;br&gt;&lt;br&gt; Thwaites glacier alone could eventually raise sea levels by 65cm if the ice shelf holding it back collapses.`</span><span class="op">,</span></span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a>    <span class="fu">md</span><span class="vs">`Thinner ice also forms on the waters surrounding Antarctica. This sea ice grows in the winter and shrinks in the summer.`</span><span class="op">,</span></span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a>    <span class="fu">md</span><span class="vs">`Although the sea ice covers a large area, it does not directly influence sea rise, as it already rests on the water.&lt;br&gt;&lt;br&gt;But the sea ice does protect the ice sheet from being battered by the ocean and winds.`</span><span class="op">,</span></span>
<span id="cb2-82"><a href="#cb2-82" aria-hidden="true" tabindex="-1"></a>    <span class="fu">md</span><span class="vs">`The sea ice was stable until 2016, when it started shrinking.&lt;br&gt;&lt;br&gt;Scientists want to understand this sudden reversal before the sea ice melts further and exposes more of the ice sheet.`</span></span>
<span id="cb2-83"><a href="#cb2-83" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb2-84"><a href="#cb2-84" aria-hidden="true" tabindex="-1"></a>comments[storyStep]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="commentary-1">
<div id="ojs-cell-2-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="commentary-2">
<div id="ojs-cell-2-2" data-nodetype="expression">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb3" data-startfrom="88" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 87;"><span id="cb3-88"><a href="#cb3-88" aria-hidden="true" tabindex="-1"></a>viewof storyStep <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">button</span>(</span>
<span id="cb3-89"><a href="#cb3-89" aria-hidden="true" tabindex="-1"></a>  [</span>
<span id="cb3-90"><a href="#cb3-90" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"→"</span><span class="op">,</span></span>
<span id="cb3-91"><a href="#cb3-91" aria-hidden="true" tabindex="-1"></a>      value <span class="kw">=&gt;</span> {</span>
<span id="cb3-92"><a href="#cb3-92" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> maxVal <span class="op">=</span> comments<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb3-93"><a href="#cb3-93" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (value <span class="op">==</span> maxVal <span class="op">-</span> <span class="dv">2</span>) {</span>
<span id="cb3-94"><a href="#cb3-94" aria-hidden="true" tabindex="-1"></a>          <span class="co">// console.log("Disabling button after this click", this)</span></span>
<span id="cb3-95"><a href="#cb3-95" aria-hidden="true" tabindex="-1"></a>          <span class="kw">this</span><span class="op">.</span><span class="at">disabled</span> <span class="op">=</span> <span class="kw">true</span></span>
<span id="cb3-96"><a href="#cb3-96" aria-hidden="true" tabindex="-1"></a>          <span class="bu">document</span></span>
<span id="cb3-97"><a href="#cb3-97" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">querySelector</span>(<span class="st">"#advance-buttons button:first-child"</span>)</span>
<span id="cb3-98"><a href="#cb3-98" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="at">disabled</span> <span class="op">=</span> <span class="kw">true</span></span>
<span id="cb3-99"><a href="#cb3-99" aria-hidden="true" tabindex="-1"></a>        } <span class="cf">else</span> {</span>
<span id="cb3-100"><a href="#cb3-100" aria-hidden="true" tabindex="-1"></a>          <span class="co">// console.log("Enabling button", this)</span></span>
<span id="cb3-101"><a href="#cb3-101" aria-hidden="true" tabindex="-1"></a>          <span class="bu">document</span></span>
<span id="cb3-102"><a href="#cb3-102" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">querySelector</span>(<span class="st">"#advance-buttons button:first-child"</span>)</span>
<span id="cb3-103"><a href="#cb3-103" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="at">disabled</span> <span class="op">=</span> <span class="kw">false</span></span>
<span id="cb3-104"><a href="#cb3-104" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb3-105"><a href="#cb3-105" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> value <span class="op">&lt;</span> maxVal <span class="op">-</span> <span class="dv">1</span> <span class="op">?</span> value <span class="op">+</span> <span class="dv">1</span> <span class="op">:</span> value</span>
<span id="cb3-106"><a href="#cb3-106" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb3-107"><a href="#cb3-107" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">,</span></span>
<span id="cb3-108"><a href="#cb3-108" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"↩"</span><span class="op">,</span></span>
<span id="cb3-109"><a href="#cb3-109" aria-hidden="true" tabindex="-1"></a>      () <span class="kw">=&gt;</span> {</span>
<span id="cb3-110"><a href="#cb3-110" aria-hidden="true" tabindex="-1"></a>        <span class="bu">document</span></span>
<span id="cb3-111"><a href="#cb3-111" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">querySelector</span>(<span class="st">"#advance-buttons button:first-child"</span>)</span>
<span id="cb3-112"><a href="#cb3-112" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="at">disabled</span> <span class="op">=</span> <span class="kw">false</span></span>
<span id="cb3-113"><a href="#cb3-113" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb3-114"><a href="#cb3-114" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb3-115"><a href="#cb3-115" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">,</span></span>
<span id="cb3-116"><a href="#cb3-116" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">,</span> {</span>
<span id="cb3-117"><a href="#cb3-117" aria-hidden="true" tabindex="-1"></a>    <span class="dt">value</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb3-118"><a href="#cb3-118" aria-hidden="true" tabindex="-1"></a>    <span class="dt">id</span><span class="op">:</span> <span class="st">"storyStepsBtns"</span></span>
<span id="cb3-119"><a href="#cb3-119" aria-hidden="true" tabindex="-1"></a>  })</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="advance-buttons" class="cell-output cell-output-display">
<div id="ojs-cell-3" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb4" data-startfrom="127" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 126;"><span id="cb4-127"><a href="#cb4-127" aria-hidden="true" tabindex="-1"></a>antarcticMap <span class="op">=</span> Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb4-128"><a href="#cb4-128" aria-hidden="true" tabindex="-1"></a>  <span class="co">// projection: "equal-earth",</span></span>
<span id="cb4-129"><a href="#cb4-129" aria-hidden="true" tabindex="-1"></a>  <span class="co">// projection: {type: "orthographic", rotate: [0, -30, 20]},</span></span>
<span id="cb4-130"><a href="#cb4-130" aria-hidden="true" tabindex="-1"></a>  <span class="dt">projection</span><span class="op">:</span> ({width<span class="op">,</span> height}) <span class="kw">=&gt;</span> d3<span class="op">.</span><span class="fu">geoAzimuthalEquidistant</span>()</span>
<span id="cb4-131"><a href="#cb4-131" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">rotate</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">90</span>])</span>
<span id="cb4-132"><a href="#cb4-132" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">translate</span>([width <span class="op">/</span> <span class="dv">2</span><span class="op">,</span> height <span class="op">/</span> <span class="dv">2</span>])</span>
<span id="cb4-133"><a href="#cb4-133" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">scale</span>(width <span class="op">/</span> <span class="fl">1.05</span>)</span>
<span id="cb4-134"><a href="#cb4-134" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">clipAngle</span>(<span class="dv">40</span>)<span class="op">,</span></span>
<span id="cb4-135"><a href="#cb4-135" aria-hidden="true" tabindex="-1"></a>  <span class="dt">color</span><span class="op">:</span> {</span>
<span id="cb4-136"><a href="#cb4-136" aria-hidden="true" tabindex="-1"></a>    <span class="dt">type</span><span class="op">:</span> <span class="st">"ordinal"</span><span class="op">,</span></span>
<span id="cb4-137"><a href="#cb4-137" aria-hidden="true" tabindex="-1"></a>    <span class="dt">range</span><span class="op">:</span> [</span>
<span id="cb4-138"><a href="#cb4-138" aria-hidden="true" tabindex="-1"></a>        <span class="st">"#084594"</span><span class="op">,</span></span>
<span id="cb4-139"><a href="#cb4-139" aria-hidden="true" tabindex="-1"></a>        <span class="st">"#2171b5"</span><span class="op">,</span></span>
<span id="cb4-140"><a href="#cb4-140" aria-hidden="true" tabindex="-1"></a>        <span class="st">"#4292c6"</span><span class="op">,</span></span>
<span id="cb4-141"><a href="#cb4-141" aria-hidden="true" tabindex="-1"></a>        <span class="st">"#6baed6"</span><span class="op">,</span></span>
<span id="cb4-142"><a href="#cb4-142" aria-hidden="true" tabindex="-1"></a>        <span class="st">"#9ecae1"</span><span class="op">,</span></span>
<span id="cb4-143"><a href="#cb4-143" aria-hidden="true" tabindex="-1"></a>        <span class="st">"#c6dbef"</span><span class="op">,</span></span>
<span id="cb4-144"><a href="#cb4-144" aria-hidden="true" tabindex="-1"></a>        <span class="co">// "#eff3ff",</span></span>
<span id="cb4-145"><a href="#cb4-145" aria-hidden="true" tabindex="-1"></a>        <span class="st">"#effaff"</span><span class="op">,</span></span>
<span id="cb4-146"><a href="#cb4-146" aria-hidden="true" tabindex="-1"></a>        <span class="st">"#fec44f"</span><span class="op">,</span></span>
<span id="cb4-147"><a href="#cb4-147" aria-hidden="true" tabindex="-1"></a>        <span class="st">"#ec7014"</span><span class="op">,</span></span>
<span id="cb4-148"><a href="#cb4-148" aria-hidden="true" tabindex="-1"></a>        <span class="st">"#cc4c02"</span><span class="op">,</span></span>
<span id="cb4-149"><a href="#cb4-149" aria-hidden="true" tabindex="-1"></a>        <span class="st">"#993404"</span></span>
<span id="cb4-150"><a href="#cb4-150" aria-hidden="true" tabindex="-1"></a>        ]<span class="op">,</span></span>
<span id="cb4-151"><a href="#cb4-151" aria-hidden="true" tabindex="-1"></a>    <span class="dt">legend</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb4-152"><a href="#cb4-152" aria-hidden="true" tabindex="-1"></a>    <span class="dt">swatchWidth</span><span class="op">:</span> <span class="dv">25</span></span>
<span id="cb4-153"><a href="#cb4-153" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb4-154"><a href="#cb4-154" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb4-155"><a href="#cb4-155" aria-hidden="true" tabindex="-1"></a>    pattern<span class="op">,</span></span>
<span id="cb4-156"><a href="#cb4-156" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">geo</span>(bedHeights<span class="op">,</span> {</span>
<span id="cb4-157"><a href="#cb4-157" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fill</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">hi</span> <span class="op">/</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb4-158"><a href="#cb4-158" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fillOpacity</span><span class="op">:</span> <span class="fl">0.75</span><span class="op">,</span></span>
<span id="cb4-159"><a href="#cb4-159" aria-hidden="true" tabindex="-1"></a>      <span class="dt">stroke</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb4-160"><a href="#cb4-160" aria-hidden="true" tabindex="-1"></a>      <span class="dt">ariaDescription</span><span class="op">:</span> <span class="st">"A map showing the elevation (or depth, where it is below sea level) of the bedrock of Antarctica. Parts of the bedrock are over two kilometres above sea level."</span></span>
<span id="cb4-161"><a href="#cb4-161" aria-hidden="true" tabindex="-1"></a>    })<span class="op">,</span></span>
<span id="cb4-162"><a href="#cb4-162" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">text</span>(labelContinents<span class="op">,</span> {</span>
<span id="cb4-163"><a href="#cb4-163" aria-hidden="true" tabindex="-1"></a>      <span class="dt">ariaHidden</span><span class="op">:</span> <span class="st">"true"</span><span class="op">,</span></span>
<span id="cb4-164"><a href="#cb4-164" aria-hidden="true" tabindex="-1"></a>      <span class="dt">text</span><span class="op">:</span> <span class="st">"t"</span><span class="op">,</span></span>
<span id="cb4-165"><a href="#cb4-165" aria-hidden="true" tabindex="-1"></a>      <span class="dt">x</span><span class="op">:</span> <span class="st">"x"</span><span class="op">,</span></span>
<span id="cb4-166"><a href="#cb4-166" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y</span><span class="op">:</span> <span class="st">"y"</span><span class="op">,</span></span>
<span id="cb4-167"><a href="#cb4-167" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fill</span><span class="op">:</span> <span class="st">"lightgrey"</span><span class="op">,</span></span>
<span id="cb4-168"><a href="#cb4-168" aria-hidden="true" tabindex="-1"></a>      <span class="dt">lineWidth</span><span class="op">:</span> <span class="dv">12</span><span class="op">,</span></span>
<span id="cb4-169"><a href="#cb4-169" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">18</span><span class="op">,</span></span>
<span id="cb4-170"><a href="#cb4-170" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fontFamily</span><span class="op">:</span> <span class="st">"Roboto Condensed"</span><span class="op">,</span></span>
<span id="cb4-171"><a href="#cb4-171" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fontStyle</span><span class="op">:</span> <span class="st">"italic"</span></span>
<span id="cb4-172"><a href="#cb4-172" aria-hidden="true" tabindex="-1"></a>    })<span class="op">,</span></span>
<span id="cb4-173"><a href="#cb4-173" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* there's some complexity here with duplicate layers as the layers that</span></span>
<span id="cb4-174"><a href="#cb4-174" aria-hidden="true" tabindex="-1"></a><span class="co">       fade in can't be displayed at the same time as the ones that animate</span></span>
<span id="cb4-175"><a href="#cb4-175" aria-hidden="true" tabindex="-1"></a><span class="co">       on the timer (render transform limitation) */</span></span>
<span id="cb4-176"><a href="#cb4-176" aria-hidden="true" tabindex="-1"></a>    storyStep <span class="op">&gt;=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> storyStep <span class="op">&lt;=</span> <span class="dv">5</span> <span class="op">?</span> landIceOutlineLayerWithFade <span class="op">:</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb4-177"><a href="#cb4-177" aria-hidden="true" tabindex="-1"></a>    storyStep <span class="op">==</span> <span class="dv">2</span> <span class="op">?</span> glacierPointLayerWithFade <span class="op">:</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb4-178"><a href="#cb4-178" aria-hidden="true" tabindex="-1"></a>    storyStep <span class="op">==</span> <span class="dv">3</span> <span class="op">||</span> storyStep <span class="op">==</span> <span class="dv">4</span> <span class="op">?</span> iceShelfArrowLayerWithFade <span class="op">:</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb4-179"><a href="#cb4-179" aria-hidden="true" tabindex="-1"></a>    storyStep <span class="op">==</span> <span class="dv">3</span> <span class="op">||</span> storyStep <span class="op">==</span> <span class="dv">4</span> <span class="op">?</span> iceShelfLabelLayerWithFade <span class="op">:</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb4-180"><a href="#cb4-180" aria-hidden="true" tabindex="-1"></a>    storyStep <span class="op">==</span> <span class="dv">5</span> <span class="op">?</span> thwaitesGlacierPointLayerWithFade <span class="op">:</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb4-181"><a href="#cb4-181" aria-hidden="true" tabindex="-1"></a>    storyStep <span class="op">==</span> <span class="dv">5</span> <span class="op">?</span> thwaitesGlacierArrowLayerWithFade <span class="op">:</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb4-182"><a href="#cb4-182" aria-hidden="true" tabindex="-1"></a>    storyStep <span class="op">==</span> <span class="dv">5</span> <span class="op">?</span> thwaitesGlacierLabelLayerWithFade <span class="op">:</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb4-183"><a href="#cb4-183" aria-hidden="true" tabindex="-1"></a>    storyStep <span class="op">&gt;=</span> <span class="dv">6</span> <span class="op">?</span> seaIceRegionLayer <span class="op">:</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb4-184"><a href="#cb4-184" aria-hidden="true" tabindex="-1"></a>    storyStep <span class="op">&gt;=</span> <span class="dv">6</span> <span class="op">?</span> landIceOutlineLayer <span class="op">:</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb4-185"><a href="#cb4-185" aria-hidden="true" tabindex="-1"></a>    storyStep <span class="op">&gt;=</span> <span class="dv">6</span> <span class="op">?</span> seaIceLabelLayer <span class="op">:</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb4-186"><a href="#cb4-186" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">,</span></span>
<span id="cb4-187"><a href="#cb4-187" aria-hidden="true" tabindex="-1"></a>  <span class="dt">height</span><span class="op">:</span> <span class="dv">800</span><span class="op">,</span></span>
<span id="cb4-188"><a href="#cb4-188" aria-hidden="true" tabindex="-1"></a>  <span class="dt">insetTop</span><span class="op">:</span> <span class="dv">0</span></span>
<span id="cb4-189"><a href="#cb4-189" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="map" class="cell-output cell-output-display">
<div id="ojs-cell-4" data-nodetype="declaration">

</div>
</div>
</div>
<div id="layer-defs" class="cell">
<div class="sourceCode cell-code hidden" id="cb5" data-startfrom="196" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 195;"><span id="cb5-196"><a href="#cb5-196" aria-hidden="true" tabindex="-1"></a>landIceOutlineLayerWithFade <span class="op">=</span> Plot<span class="op">.</span><span class="fu">geo</span>(landIceOutline<span class="op">,</span> {</span>
<span id="cb5-197"><a href="#cb5-197" aria-hidden="true" tabindex="-1"></a>  <span class="dt">fill</span><span class="op">:</span> <span class="st">"url(#stripes)"</span><span class="op">,</span></span>
<span id="cb5-198"><a href="#cb5-198" aria-hidden="true" tabindex="-1"></a>  <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#333333"</span><span class="op">,</span></span>
<span id="cb5-199"><a href="#cb5-199" aria-hidden="true" tabindex="-1"></a>  <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb5-200"><a href="#cb5-200" aria-hidden="true" tabindex="-1"></a>  <span class="dt">fillOpacity</span><span class="op">:</span> <span class="fl">0.75</span><span class="op">,</span></span>
<span id="cb5-201"><a href="#cb5-201" aria-hidden="true" tabindex="-1"></a>  <span class="dt">render</span><span class="op">:</span> fadeLayerIn<span class="op">,</span></span>
<span id="cb5-202"><a href="#cb5-202" aria-hidden="true" tabindex="-1"></a>  <span class="dt">ariaDescription</span><span class="op">:</span> <span class="st">"An outline of the parts of Antarctica covered with ice. This is typically the outline you see on maps."</span></span>
<span id="cb5-203"><a href="#cb5-203" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb5-204"><a href="#cb5-204" aria-hidden="true" tabindex="-1"></a>landIceOutlineLayer <span class="op">=</span> Plot<span class="op">.</span><span class="fu">geo</span>(landIceOutline<span class="op">,</span> {</span>
<span id="cb5-205"><a href="#cb5-205" aria-hidden="true" tabindex="-1"></a>  <span class="dt">fill</span><span class="op">:</span> <span class="st">"url(#stripes)"</span><span class="op">,</span></span>
<span id="cb5-206"><a href="#cb5-206" aria-hidden="true" tabindex="-1"></a>  <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#333333"</span><span class="op">,</span></span>
<span id="cb5-207"><a href="#cb5-207" aria-hidden="true" tabindex="-1"></a>  <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb5-208"><a href="#cb5-208" aria-hidden="true" tabindex="-1"></a>  <span class="dt">fillOpacity</span><span class="op">:</span> <span class="fl">0.75</span><span class="op">,</span></span>
<span id="cb5-209"><a href="#cb5-209" aria-hidden="true" tabindex="-1"></a>  <span class="dt">ariaHidden</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb5-210"><a href="#cb5-210" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb5-211"><a href="#cb5-211" aria-hidden="true" tabindex="-1"></a>iceShelfArrowLayerWithFade <span class="op">=</span> Plot<span class="op">.</span><span class="fu">arrow</span>(labelShelves<span class="op">,</span> {</span>
<span id="cb5-212"><a href="#cb5-212" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x1</span><span class="op">:</span> <span class="st">"xfrom"</span><span class="op">,</span></span>
<span id="cb5-213"><a href="#cb5-213" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y1</span><span class="op">:</span> <span class="st">"yfrom"</span><span class="op">,</span></span>
<span id="cb5-214"><a href="#cb5-214" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x2</span><span class="op">:</span> <span class="st">"xto"</span><span class="op">,</span></span>
<span id="cb5-215"><a href="#cb5-215" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y2</span><span class="op">:</span> <span class="st">"yto"</span><span class="op">,</span></span>
<span id="cb5-216"><a href="#cb5-216" aria-hidden="true" tabindex="-1"></a>  <span class="dt">bend</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb5-217"><a href="#cb5-217" aria-hidden="true" tabindex="-1"></a>  <span class="dt">stroke</span><span class="op">:</span> <span class="st">"navy"</span><span class="op">,</span></span>
<span id="cb5-218"><a href="#cb5-218" aria-hidden="true" tabindex="-1"></a>  <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">3</span><span class="op">,</span></span>
<span id="cb5-219"><a href="#cb5-219" aria-hidden="true" tabindex="-1"></a>  <span class="dt">render</span><span class="op">:</span> fadeLayerIn<span class="op">,</span></span>
<span id="cb5-220"><a href="#cb5-220" aria-hidden="true" tabindex="-1"></a>  <span class="dt">aria</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb5-221"><a href="#cb5-221" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb5-222"><a href="#cb5-222" aria-hidden="true" tabindex="-1"></a>iceShelfLabelLayerWithFade <span class="op">=</span> Plot<span class="op">.</span><span class="fu">text</span>(labelShelves<span class="op">,</span> {</span>
<span id="cb5-223"><a href="#cb5-223" aria-hidden="true" tabindex="-1"></a>  <span class="dt">text</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">t</span><span class="op">.</span><span class="fu">toUpperCase</span>()<span class="op">,</span></span>
<span id="cb5-224"><a href="#cb5-224" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> <span class="st">"xfrom"</span><span class="op">,</span></span>
<span id="cb5-225"><a href="#cb5-225" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">yfrom</span> <span class="op">+</span> <span class="fl">2.5</span><span class="op">,</span> <span class="co">// shift labels outward, not up/down</span></span>
<span id="cb5-226"><a href="#cb5-226" aria-hidden="true" tabindex="-1"></a>  <span class="dt">stroke</span><span class="op">:</span> <span class="st">"lightcyan"</span><span class="op">,</span></span>
<span id="cb5-227"><a href="#cb5-227" aria-hidden="true" tabindex="-1"></a>  <span class="dt">fill</span><span class="op">:</span> <span class="st">"navy"</span><span class="op">,</span></span>
<span id="cb5-228"><a href="#cb5-228" aria-hidden="true" tabindex="-1"></a>  <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">4</span><span class="op">,</span></span>
<span id="cb5-229"><a href="#cb5-229" aria-hidden="true" tabindex="-1"></a>  <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">24</span><span class="op">,</span></span>
<span id="cb5-230"><a href="#cb5-230" aria-hidden="true" tabindex="-1"></a>  <span class="dt">fontFamily</span><span class="op">:</span> <span class="st">"Roboto Condensed"</span><span class="op">,</span></span>
<span id="cb5-231"><a href="#cb5-231" aria-hidden="true" tabindex="-1"></a>  <span class="dt">fontWeight</span><span class="op">:</span> <span class="st">"bold"</span><span class="op">,</span></span>
<span id="cb5-232"><a href="#cb5-232" aria-hidden="true" tabindex="-1"></a>  <span class="dt">lineWidth</span><span class="op">:</span> <span class="dv">15</span><span class="op">,</span></span>
<span id="cb5-233"><a href="#cb5-233" aria-hidden="true" tabindex="-1"></a>  <span class="dt">render</span><span class="op">:</span> fadeLayerIn<span class="op">,</span></span>
<span id="cb5-234"><a href="#cb5-234" aria-hidden="true" tabindex="-1"></a>  <span class="dt">ariaLabel</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">t</span></span>
<span id="cb5-235"><a href="#cb5-235" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb5-236"><a href="#cb5-236" aria-hidden="true" tabindex="-1"></a>glacierPointLayerWithFade <span class="op">=</span> Plot<span class="op">.</span><span class="fu">dot</span>(glacierPoints<span class="op">,</span> {</span>
<span id="cb5-237"><a href="#cb5-237" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> <span class="st">"lon"</span><span class="op">,</span></span>
<span id="cb5-238"><a href="#cb5-238" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> <span class="st">"lat"</span><span class="op">,</span></span>
<span id="cb5-239"><a href="#cb5-239" aria-hidden="true" tabindex="-1"></a>  <span class="dt">r</span><span class="op">:</span> <span class="fl">2.5</span><span class="op">,</span></span>
<span id="cb5-240"><a href="#cb5-240" aria-hidden="true" tabindex="-1"></a>  <span class="co">// opacity: 0.75,</span></span>
<span id="cb5-241"><a href="#cb5-241" aria-hidden="true" tabindex="-1"></a>  <span class="dt">fill</span><span class="op">:</span> <span class="st">"red"</span><span class="op">,</span></span>
<span id="cb5-242"><a href="#cb5-242" aria-hidden="true" tabindex="-1"></a>  <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#00000099"</span><span class="op">,</span></span>
<span id="cb5-243"><a href="#cb5-243" aria-hidden="true" tabindex="-1"></a>  <span class="dt">strokeWidth</span><span class="op">:</span> <span class="fl">0.5</span><span class="op">,</span></span>
<span id="cb5-244"><a href="#cb5-244" aria-hidden="true" tabindex="-1"></a>  <span class="dt">render</span><span class="op">:</span> fadeLayerIn<span class="op">,</span></span>
<span id="cb5-245"><a href="#cb5-245" aria-hidden="true" tabindex="-1"></a>  <span class="dt">ariaDescription</span><span class="op">:</span> <span class="st">"Points around the edges of Antarctic marking glaciers: slow-moving rivers of ice."</span></span>
<span id="cb5-246"><a href="#cb5-246" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb5-247"><a href="#cb5-247" aria-hidden="true" tabindex="-1"></a>thwaitesGlacierPointLayerWithFade <span class="op">=</span> Plot<span class="op">.</span><span class="fu">dot</span>(</span>
<span id="cb5-248"><a href="#cb5-248" aria-hidden="true" tabindex="-1"></a>  [{ <span class="dt">lon</span><span class="op">:</span> <span class="op">-</span><span class="fl">106.75</span><span class="op">,</span> <span class="dt">lat</span><span class="op">:</span> <span class="op">-</span><span class="fl">75.5</span> }]<span class="op">,</span> {</span>
<span id="cb5-249"><a href="#cb5-249" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> <span class="st">"lon"</span><span class="op">,</span></span>
<span id="cb5-250"><a href="#cb5-250" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> <span class="st">"lat"</span><span class="op">,</span></span>
<span id="cb5-251"><a href="#cb5-251" aria-hidden="true" tabindex="-1"></a>  <span class="dt">r</span><span class="op">:</span> <span class="fl">4.5</span><span class="op">,</span></span>
<span id="cb5-252"><a href="#cb5-252" aria-hidden="true" tabindex="-1"></a>  <span class="dt">fill</span><span class="op">:</span> <span class="st">"navy"</span><span class="op">,</span></span>
<span id="cb5-253"><a href="#cb5-253" aria-hidden="true" tabindex="-1"></a>  <span class="dt">stroke</span><span class="op">:</span> <span class="st">"lightcyan"</span><span class="op">,</span></span>
<span id="cb5-254"><a href="#cb5-254" aria-hidden="true" tabindex="-1"></a>  <span class="dt">strokeWidth</span><span class="op">:</span> <span class="fl">0.5</span><span class="op">,</span></span>
<span id="cb5-255"><a href="#cb5-255" aria-hidden="true" tabindex="-1"></a>  <span class="dt">symbol</span><span class="op">:</span> <span class="st">"triangle"</span><span class="op">,</span></span>
<span id="cb5-256"><a href="#cb5-256" aria-hidden="true" tabindex="-1"></a>  <span class="dt">render</span><span class="op">:</span> fadeLayerIn<span class="op">,</span></span>
<span id="cb5-257"><a href="#cb5-257" aria-hidden="true" tabindex="-1"></a>  <span class="dt">ariaHidden</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb5-258"><a href="#cb5-258" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb5-259"><a href="#cb5-259" aria-hidden="true" tabindex="-1"></a>thwaitesGlacierArrowLayerWithFade <span class="op">=</span> Plot<span class="op">.</span><span class="fu">arrow</span>(labelThwaites<span class="op">,</span> {</span>
<span id="cb5-260"><a href="#cb5-260" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x1</span><span class="op">:</span> <span class="st">"xfrom"</span><span class="op">,</span></span>
<span id="cb5-261"><a href="#cb5-261" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y1</span><span class="op">:</span> <span class="st">"yfrom"</span><span class="op">,</span></span>
<span id="cb5-262"><a href="#cb5-262" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x2</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">xto</span> <span class="op">-</span> <span class="fl">3.5</span><span class="op">,</span></span>
<span id="cb5-263"><a href="#cb5-263" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y2</span><span class="op">:</span> <span class="st">"yto"</span><span class="op">,</span></span>
<span id="cb5-264"><a href="#cb5-264" aria-hidden="true" tabindex="-1"></a>  <span class="dt">bend</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb5-265"><a href="#cb5-265" aria-hidden="true" tabindex="-1"></a>  <span class="dt">stroke</span><span class="op">:</span> <span class="st">"navy"</span><span class="op">,</span></span>
<span id="cb5-266"><a href="#cb5-266" aria-hidden="true" tabindex="-1"></a>  <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">3</span><span class="op">,</span></span>
<span id="cb5-267"><a href="#cb5-267" aria-hidden="true" tabindex="-1"></a>  <span class="dt">render</span><span class="op">:</span> fadeLayerIn<span class="op">,</span></span>
<span id="cb5-268"><a href="#cb5-268" aria-hidden="true" tabindex="-1"></a>  <span class="dt">ariaLabel</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">t</span></span>
<span id="cb5-269"><a href="#cb5-269" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb5-270"><a href="#cb5-270" aria-hidden="true" tabindex="-1"></a>thwaitesGlacierLabelLayerWithFade <span class="op">=</span> Plot<span class="op">.</span><span class="fu">text</span>(labelThwaites<span class="op">,</span> {</span>
<span id="cb5-271"><a href="#cb5-271" aria-hidden="true" tabindex="-1"></a>  <span class="dt">text</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">t</span><span class="op">.</span><span class="fu">toUpperCase</span>()<span class="op">,</span></span>
<span id="cb5-272"><a href="#cb5-272" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">xfrom</span> <span class="op">-</span> <span class="fl">2.5</span><span class="op">,</span></span>
<span id="cb5-273"><a href="#cb5-273" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> <span class="st">"yfrom"</span><span class="op">,</span> <span class="co">// shift labels outward, not up/down</span></span>
<span id="cb5-274"><a href="#cb5-274" aria-hidden="true" tabindex="-1"></a>  <span class="dt">textAnchor</span><span class="op">:</span> <span class="st">"end"</span><span class="op">,</span></span>
<span id="cb5-275"><a href="#cb5-275" aria-hidden="true" tabindex="-1"></a>  <span class="dt">stroke</span><span class="op">:</span> <span class="st">"lightcyan"</span><span class="op">,</span></span>
<span id="cb5-276"><a href="#cb5-276" aria-hidden="true" tabindex="-1"></a>  <span class="dt">fill</span><span class="op">:</span> <span class="st">"navy"</span><span class="op">,</span></span>
<span id="cb5-277"><a href="#cb5-277" aria-hidden="true" tabindex="-1"></a>  <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">4</span><span class="op">,</span></span>
<span id="cb5-278"><a href="#cb5-278" aria-hidden="true" tabindex="-1"></a>  <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">18</span><span class="op">,</span></span>
<span id="cb5-279"><a href="#cb5-279" aria-hidden="true" tabindex="-1"></a>  <span class="dt">fontFamily</span><span class="op">:</span> <span class="st">"Roboto Condensed"</span><span class="op">,</span></span>
<span id="cb5-280"><a href="#cb5-280" aria-hidden="true" tabindex="-1"></a>  <span class="dt">fontWeight</span><span class="op">:</span> <span class="st">"bold"</span><span class="op">,</span></span>
<span id="cb5-281"><a href="#cb5-281" aria-hidden="true" tabindex="-1"></a>  <span class="dt">lineWidth</span><span class="op">:</span> <span class="dv">10</span><span class="op">,</span></span>
<span id="cb5-282"><a href="#cb5-282" aria-hidden="true" tabindex="-1"></a>  <span class="dt">render</span><span class="op">:</span> fadeLayerIn<span class="op">,</span></span>
<span id="cb5-283"><a href="#cb5-283" aria-hidden="true" tabindex="-1"></a>  <span class="dt">ariaHidden</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb5-284"><a href="#cb5-284" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb5-285"><a href="#cb5-285" aria-hidden="true" tabindex="-1"></a>seaIceRegionLayer <span class="op">=</span> Plot<span class="op">.</span><span class="fu">geo</span>(currentSeaIceRegion<span class="op">,</span> {</span>
<span id="cb5-286"><a href="#cb5-286" aria-hidden="true" tabindex="-1"></a>  <span class="dt">fill</span><span class="op">:</span> <span class="st">"#dddddd"</span><span class="op">,</span></span>
<span id="cb5-287"><a href="#cb5-287" aria-hidden="true" tabindex="-1"></a>  <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#eeeeee"</span><span class="op">,</span></span>
<span id="cb5-288"><a href="#cb5-288" aria-hidden="true" tabindex="-1"></a>  <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb5-289"><a href="#cb5-289" aria-hidden="true" tabindex="-1"></a>  <span class="dt">fillOpacity</span><span class="op">:</span> <span class="fl">0.65</span><span class="op">,</span></span>
<span id="cb5-290"><a href="#cb5-290" aria-hidden="true" tabindex="-1"></a>  <span class="dt">ariaHidden</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb5-291"><a href="#cb5-291" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb5-292"><a href="#cb5-292" aria-hidden="true" tabindex="-1"></a>seaIceLabelLayer <span class="op">=</span> Plot<span class="op">.</span><span class="fu">text</span>(labelSeaIce<span class="op">,</span></span>
<span id="cb5-293"><a href="#cb5-293" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb5-294"><a href="#cb5-294" aria-hidden="true" tabindex="-1"></a>  <span class="dt">text</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">t</span><span class="op">.</span><span class="fu">toUpperCase</span>()<span class="op">,</span></span>
<span id="cb5-295"><a href="#cb5-295" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> <span class="st">"x"</span><span class="op">,</span></span>
<span id="cb5-296"><a href="#cb5-296" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> <span class="st">"y"</span><span class="op">,</span></span>
<span id="cb5-297"><a href="#cb5-297" aria-hidden="true" tabindex="-1"></a>  <span class="dt">textAnchor</span><span class="op">:</span> <span class="st">"start"</span><span class="op">,</span></span>
<span id="cb5-298"><a href="#cb5-298" aria-hidden="true" tabindex="-1"></a>  <span class="dt">stroke</span><span class="op">:</span> <span class="st">"white"</span><span class="op">,</span></span>
<span id="cb5-299"><a href="#cb5-299" aria-hidden="true" tabindex="-1"></a>  <span class="dt">fill</span><span class="op">:</span> <span class="st">"#666666"</span><span class="op">,</span></span>
<span id="cb5-300"><a href="#cb5-300" aria-hidden="true" tabindex="-1"></a>  <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">4</span><span class="op">,</span></span>
<span id="cb5-301"><a href="#cb5-301" aria-hidden="true" tabindex="-1"></a>  <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">24</span><span class="op">,</span></span>
<span id="cb5-302"><a href="#cb5-302" aria-hidden="true" tabindex="-1"></a>  <span class="dt">fontFamily</span><span class="op">:</span> <span class="st">"Roboto Condensed"</span><span class="op">,</span></span>
<span id="cb5-303"><a href="#cb5-303" aria-hidden="true" tabindex="-1"></a>  <span class="dt">fontWeight</span><span class="op">:</span> <span class="st">"bold"</span><span class="op">,</span></span>
<span id="cb5-304"><a href="#cb5-304" aria-hidden="true" tabindex="-1"></a>  <span class="dt">lineWidth</span><span class="op">:</span> <span class="dv">20</span><span class="op">,</span></span>
<span id="cb5-305"><a href="#cb5-305" aria-hidden="true" tabindex="-1"></a>  <span class="dt">ariaLabel</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">t</span></span>
<span id="cb5-306"><a href="#cb5-306" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="layer-defs-1">
<div id="ojs-cell-5-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="layer-defs-2">
<div id="ojs-cell-5-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="layer-defs-3">
<div id="ojs-cell-5-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="layer-defs-4">
<div id="ojs-cell-5-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="layer-defs-5">
<div id="ojs-cell-5-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="layer-defs-6">
<div id="ojs-cell-5-6" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="layer-defs-7">
<div id="ojs-cell-5-7" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="layer-defs-8">
<div id="ojs-cell-5-8" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="layer-defs-9">
<div id="ojs-cell-5-9" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="layer-defs-10">
<div id="ojs-cell-5-10" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div id="map-labels" class="cell">
<div class="sourceCode cell-code hidden" id="cb6" data-startfrom="311" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 310;"><span id="cb6-311"><a href="#cb6-311" aria-hidden="true" tabindex="-1"></a>labelShelves <span class="op">=</span> [</span>
<span id="cb6-312"><a href="#cb6-312" aria-hidden="true" tabindex="-1"></a>  { </span>
<span id="cb6-313"><a href="#cb6-313" aria-hidden="true" tabindex="-1"></a>    <span class="dt">t</span><span class="op">:</span> <span class="st">"Ross Ice Shelf"</span><span class="op">,</span></span>
<span id="cb6-314"><a href="#cb6-314" aria-hidden="true" tabindex="-1"></a>    <span class="dt">xfrom</span><span class="op">:</span> <span class="op">-</span><span class="fl">165.625245</span><span class="op">,</span></span>
<span id="cb6-315"><a href="#cb6-315" aria-hidden="true" tabindex="-1"></a>    <span class="dt">yfrom</span><span class="op">:</span> <span class="op">-</span><span class="fl">70.639197</span><span class="op">,</span></span>
<span id="cb6-316"><a href="#cb6-316" aria-hidden="true" tabindex="-1"></a>    <span class="dt">xto</span><span class="op">:</span> <span class="op">-</span><span class="fl">176.463560</span><span class="op">,</span></span>
<span id="cb6-317"><a href="#cb6-317" aria-hidden="true" tabindex="-1"></a>    <span class="dt">yto</span><span class="op">:</span> <span class="op">-</span><span class="fl">80.399690</span></span>
<span id="cb6-318"><a href="#cb6-318" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span> {</span>
<span id="cb6-319"><a href="#cb6-319" aria-hidden="true" tabindex="-1"></a>    <span class="dt">t</span><span class="op">:</span> <span class="st">"Ronne Ice Shelf"</span><span class="op">,</span></span>
<span id="cb6-320"><a href="#cb6-320" aria-hidden="true" tabindex="-1"></a>    <span class="dt">xfrom</span><span class="op">:</span> <span class="op">-</span><span class="fl">43.884332</span><span class="op">,</span></span>
<span id="cb6-321"><a href="#cb6-321" aria-hidden="true" tabindex="-1"></a>    <span class="dt">yfrom</span><span class="op">:</span> <span class="op">-</span><span class="fl">72.110015</span><span class="op">,</span></span>
<span id="cb6-322"><a href="#cb6-322" aria-hidden="true" tabindex="-1"></a>    <span class="dt">xto</span><span class="op">:</span> <span class="op">-</span><span class="fl">68.884332</span><span class="op">,</span></span>
<span id="cb6-323"><a href="#cb6-323" aria-hidden="true" tabindex="-1"></a>    <span class="dt">yto</span><span class="op">:</span> <span class="op">-</span><span class="fl">80.110015</span></span>
<span id="cb6-324"><a href="#cb6-324" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb6-325"><a href="#cb6-325" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb6-326"><a href="#cb6-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-327"><a href="#cb6-327" aria-hidden="true" tabindex="-1"></a>labelThwaites <span class="op">=</span> [</span>
<span id="cb6-328"><a href="#cb6-328" aria-hidden="true" tabindex="-1"></a>  { </span>
<span id="cb6-329"><a href="#cb6-329" aria-hidden="true" tabindex="-1"></a>    <span class="dt">t</span><span class="op">:</span> <span class="st">"Thwaites glacier &amp; ice shelf"</span><span class="op">,</span></span>
<span id="cb6-330"><a href="#cb6-330" aria-hidden="true" tabindex="-1"></a>    <span class="dt">xfrom</span><span class="op">:</span> <span class="op">-</span><span class="fl">123.75</span><span class="op">,</span></span>
<span id="cb6-331"><a href="#cb6-331" aria-hidden="true" tabindex="-1"></a>    <span class="dt">yfrom</span><span class="op">:</span> <span class="op">-</span><span class="dv">73</span><span class="op">,</span></span>
<span id="cb6-332"><a href="#cb6-332" aria-hidden="true" tabindex="-1"></a>    <span class="dt">xto</span><span class="op">:</span> <span class="op">-</span><span class="fl">106.75</span><span class="op">,</span></span>
<span id="cb6-333"><a href="#cb6-333" aria-hidden="true" tabindex="-1"></a>    <span class="dt">yto</span><span class="op">:</span> <span class="op">-</span><span class="fl">75.5</span></span>
<span id="cb6-334"><a href="#cb6-334" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb6-335"><a href="#cb6-335" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb6-336"><a href="#cb6-336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-337"><a href="#cb6-337" aria-hidden="true" tabindex="-1"></a>labelContinents <span class="op">=</span> [</span>
<span id="cb6-338"><a href="#cb6-338" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb6-339"><a href="#cb6-339" aria-hidden="true" tabindex="-1"></a>    <span class="dt">x</span><span class="op">:</span> <span class="dv">135</span><span class="op">,</span></span>
<span id="cb6-340"><a href="#cb6-340" aria-hidden="true" tabindex="-1"></a>    <span class="dt">y</span><span class="op">:</span> <span class="op">-</span><span class="fl">53.5</span><span class="op">,</span></span>
<span id="cb6-341"><a href="#cb6-341" aria-hidden="true" tabindex="-1"></a>    <span class="dt">t</span><span class="op">:</span> <span class="st">"AUSTRALIA"</span></span>
<span id="cb6-342"><a href="#cb6-342" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb6-343"><a href="#cb6-343" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb6-344"><a href="#cb6-344" aria-hidden="true" tabindex="-1"></a>    <span class="dt">x</span><span class="op">:</span> <span class="dv">25</span><span class="op">,</span></span>
<span id="cb6-345"><a href="#cb6-345" aria-hidden="true" tabindex="-1"></a>    <span class="dt">y</span><span class="op">:</span> <span class="op">-</span><span class="dv">55</span><span class="op">,</span></span>
<span id="cb6-346"><a href="#cb6-346" aria-hidden="true" tabindex="-1"></a>    <span class="dt">t</span><span class="op">:</span> <span class="st">"AFRICA"</span></span>
<span id="cb6-347"><a href="#cb6-347" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb6-348"><a href="#cb6-348" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb6-349"><a href="#cb6-349" aria-hidden="true" tabindex="-1"></a>    <span class="dt">x</span><span class="op">:</span> <span class="op">-</span><span class="dv">45</span><span class="op">,</span></span>
<span id="cb6-350"><a href="#cb6-350" aria-hidden="true" tabindex="-1"></a>    <span class="dt">y</span><span class="op">:</span> <span class="op">-</span><span class="fl">52.5</span><span class="op">,</span></span>
<span id="cb6-351"><a href="#cb6-351" aria-hidden="true" tabindex="-1"></a>    <span class="dt">t</span><span class="op">:</span> <span class="st">"SOUTH</span><span class="sc">\n</span><span class="st">AMERICA"</span></span>
<span id="cb6-352"><a href="#cb6-352" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb6-353"><a href="#cb6-353" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb6-354"><a href="#cb6-354" aria-hidden="true" tabindex="-1"></a>months <span class="op">=</span> [<span class="st">"January"</span><span class="op">,</span> <span class="st">"February"</span><span class="op">,</span> <span class="st">"March"</span><span class="op">,</span> <span class="st">"April"</span><span class="op">,</span> <span class="st">"May"</span><span class="op">,</span> <span class="st">"June"</span><span class="op">,</span> <span class="st">"July"</span><span class="op">,</span></span>
<span id="cb6-355"><a href="#cb6-355" aria-hidden="true" tabindex="-1"></a>  <span class="st">"August"</span><span class="op">,</span> <span class="st">"September"</span><span class="op">,</span> <span class="st">"October"</span><span class="op">,</span> <span class="st">"November"</span><span class="op">,</span> <span class="st">"December"</span>]</span>
<span id="cb6-356"><a href="#cb6-356" aria-hidden="true" tabindex="-1"></a>labelSeaIce <span class="op">=</span> [</span>
<span id="cb6-357"><a href="#cb6-357" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb6-358"><a href="#cb6-358" aria-hidden="true" tabindex="-1"></a>    <span class="dt">x</span><span class="op">:</span> <span class="op">-</span><span class="dv">123</span><span class="op">,</span></span>
<span id="cb6-359"><a href="#cb6-359" aria-hidden="true" tabindex="-1"></a>    <span class="dt">y</span><span class="op">:</span> <span class="op">-</span><span class="fl">55.5</span><span class="op">,</span></span>
<span id="cb6-360"><a href="#cb6-360" aria-hidden="true" tabindex="-1"></a>    <span class="dt">t</span><span class="op">:</span> <span class="vs">`Typical sea ice in </span><span class="sc">${</span>months[monthTimer]<span class="sc">}</span><span class="vs">`</span></span>
<span id="cb6-361"><a href="#cb6-361" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb6-362"><a href="#cb6-362" aria-hidden="true" tabindex="-1"></a>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="map-labels-1">
<div id="ojs-cell-6-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="map-labels-2">
<div id="ojs-cell-6-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="map-labels-3">
<div id="ojs-cell-6-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="map-labels-4">
<div id="ojs-cell-6-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="map-labels-5">
<div id="ojs-cell-6-5" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb7" data-startfrom="366" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 365;"><span id="cb7-366"><a href="#cb7-366" aria-hidden="true" tabindex="-1"></a><span class="co">// this render transform fades layers in (but not out)</span></span>
<span id="cb7-367"><a href="#cb7-367" aria-hidden="true" tabindex="-1"></a>fadeLayerIn <span class="op">=</span> (i<span class="op">,</span> s<span class="op">,</span> v<span class="op">,</span> d<span class="op">,</span> c<span class="op">,</span> next) <span class="kw">=&gt;</span> {</span>
<span id="cb7-368"><a href="#cb7-368" aria-hidden="true" tabindex="-1"></a>  <span class="co">// index, scales, values, dimensions, context, next</span></span>
<span id="cb7-369"><a href="#cb7-369" aria-hidden="true" tabindex="-1"></a>  <span class="co">// console.log("values", v)</span></span>
<span id="cb7-370"><a href="#cb7-370" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> marks <span class="op">=</span> <span class="fu">next</span>(i<span class="op">,</span> s<span class="op">,</span> v<span class="op">,</span> d<span class="op">,</span> c)</span>
<span id="cb7-371"><a href="#cb7-371" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">"marks"</span><span class="op">,</span> marks)</span>
<span id="cb7-372"><a href="#cb7-372" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> svg <span class="op">=</span> c<span class="op">.</span><span class="at">ownerSVGElement</span></span>
<span id="cb7-373"><a href="#cb7-373" aria-hidden="true" tabindex="-1"></a>  <span class="co">// console.log("Owning SVG:", svg)</span></span>
<span id="cb7-374"><a href="#cb7-374" aria-hidden="true" tabindex="-1"></a>  d3</span>
<span id="cb7-375"><a href="#cb7-375" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">select</span>(marks)</span>
<span id="cb7-376"><a href="#cb7-376" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">style</span>(<span class="st">"opacity"</span><span class="op">,</span> <span class="dv">0</span>)</span>
<span id="cb7-377"><a href="#cb7-377" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">transition</span>()</span>
<span id="cb7-378"><a href="#cb7-378" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">duration</span>(<span class="dv">750</span>)</span>
<span id="cb7-379"><a href="#cb7-379" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">ease</span>(d3<span class="op">.</span><span class="at">easeLinear</span>)</span>
<span id="cb7-380"><a href="#cb7-380" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">style</span>(<span class="st">"opacity"</span><span class="op">,</span> <span class="dv">1</span>)</span>
<span id="cb7-381"><a href="#cb7-381" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> marks</span>
<span id="cb7-382"><a href="#cb7-382" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fade-in-out" class="cell-output cell-output-display">
<div id="ojs-cell-7" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb8" data-startfrom="387" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 386;"><span id="cb8-387"><a href="#cb8-387" aria-hidden="true" tabindex="-1"></a>monthTimer <span class="op">=</span> {</span>
<span id="cb8-388"><a href="#cb8-388" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb8-389"><a href="#cb8-389" aria-hidden="true" tabindex="-1"></a>  <span class="kw">yield</span> i</span>
<span id="cb8-390"><a href="#cb8-390" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span>(storyStep <span class="op">&gt;=</span> <span class="dv">6</span>) {</span>
<span id="cb8-391"><a href="#cb8-391" aria-hidden="true" tabindex="-1"></a>    <span class="kw">yield</span> Promises<span class="op">.</span><span class="fu">tick</span>(<span class="dv">250</span>)<span class="op">.</span><span class="fu">then</span>(() <span class="kw">=&gt;</span> i<span class="op">++</span> <span class="op">%</span> <span class="dv">12</span>)</span>
<span id="cb8-392"><a href="#cb8-392" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb8-393"><a href="#cb8-393" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="current-month" class="cell-output cell-output-display">
<div id="ojs-cell-8" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb9" data-startfrom="398" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 397;"><span id="cb9-398"><a href="#cb9-398" aria-hidden="true" tabindex="-1"></a>pattern <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="fu">svg</span><span class="vs">`&lt;defs&gt;&lt;pattern id="stripes" width="100" height="100" patternUnits="userSpaceOnUse" stroke="#33333399" stroke-width="1"&gt;&lt;line x1="-53.03" y1="53.03" x2="53.03" y2="-53.03"/&gt;&lt;line x1="-47.48" y1="58.59" x2="58.59" y2="-47.48"/&gt;&lt;line x1="-41.92" y1="64.14" x2="64.14" y2="-41.92"/&gt;&lt;line x1="-36.37" y1="69.7" x2="69.7" y2="-36.37"/&gt;&lt;line x1="-30.81" y1="75.26" x2="75.26" y2="-30.81"/&gt;&lt;line x1="-25.26" y1="80.81" x2="80.81" y2="-25.26"/&gt;&lt;line x1="-19.7" y1="86.37" x2="86.37" y2="-19.7"/&gt;&lt;line x1="-14.14" y1="91.92" x2="91.92" y2="-14.14"/&gt;&lt;line x1="-8.59" y1="97.48" x2="97.48" y2="-8.59"/&gt;&lt;line x1="-3.03" y1="103.03" x2="103.03" y2="-3.03"/&gt;&lt;line x1="2.52" y1="108.59" x2="108.59" y2="2.52"/&gt;&lt;line x1="8.08" y1="114.14" x2="114.14" y2="8.08"/&gt;&lt;line x1="13.63" y1="119.7" x2="119.7" y2="13.63"/&gt;&lt;line x1="19.19" y1="125.26" x2="125.26" y2="19.19"/&gt;&lt;line x1="24.74" y1="130.81" x2="130.81" y2="24.74"/&gt;&lt;line x1="30.3" y1="136.37" x2="136.37" y2="30.3"/&gt;&lt;line x1="35.86" y1="141.92" x2="141.92" y2="35.86"/&gt;&lt;line x1="41.41" y1="147.48" x2="147.48" y2="41.41"/&gt;&lt;line x1="46.97" y1="153.03" x2="153.03" y2="46.97"/&gt;&lt;/pattern&gt;&lt;/defs&gt;`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="crosshatch-pattern" class="cell-output cell-output-display">
<div id="ojs-cell-9" data-nodetype="declaration">

</div>
</div>
</div>
<!-- initialise miromodal.js -->
<div class="cell" data-include="false">
<div class="sourceCode cell-code hidden" id="cb10" data-startfrom="1" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>micro <span class="op">=</span> <span class="pp">require</span>(<span class="st">"micromodal@0.4.10"</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>micro<span class="op">.</span><span class="fu">init</span>({</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">awaitOpenAnimation</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">awaitCloseAnimation</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-10-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-10-2" data-nodetype="expression">

</div>
</div>
</div>
</div>
<div id="modal-useremix" class="modal micromodal-slide" aria-hidden="true">
<div class="modal__overlay" tabindex="-1" data-micromodal-close="true">
<div class="modal__container" role="dialog" aria-modal="true" aria-labelledby="modal-useremix-title">
<button class="modal__close" aria-label="Close modal" data-micromodal-close="">
</button>
<div id="modal-useremix-content">
<h2 id="use-remix" class="anchored">Use + Remix</h2>
<p>This map, as well as the analysis that underpins it, is available under a <a href="https://creativecommons.org/licenses/by/4.0"><strong>Creative Commons Attribution 4.0 licence</strong></a>.</p>
<p>Please acknowledge <a href="https://360info.org">360info</a> and our data sources when you use them.</p>
<h4 id="embed-this-chart-in-your-article" class="anchored">Embed this chart in your article</h4>
<p>Copy and paste the following code:</p>
<div class="embedcode">
<div class="sourceCode" id="cb11"><pre class="sourceCode html code-with-copy"><code class="sourceCode html"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> style</span><span class="op">=</span><span class="st">"aspect-ratio: 13 / 20; width: 100%; min-height: 500px; max-height: 893px;"</span><span class="dt">&gt;</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">iframe</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="ot">    allow</span><span class="op">=</span><span class="st">"fullscreen; clipboard-write self https://antarcticamap.360visuals.org"</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="ot">    allowfullscreen</span><span class="op">=</span><span class="st">"true"</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="ot">    src</span><span class="op">=</span><span class="st">"https://antarcticamap.360visuals.org/antarctic-map/"</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="ot">    title</span><span class="op">=</span><span class="st">"Interactive: exploring Antarctica’s ice"</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="ot">    style</span><span class="op">=</span><span class="st">"width:100%; height:100%; position: relative; top: 0; left: 0; border:none; background-color: white;"</span><span class="ot"> scrolling</span><span class="op">=</span><span class="st">"no"</span><span class="dt">&gt;&lt;/</span><span class="kw">iframe</span><span class="dt">&gt;</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This content is subject to <a href="https://newshub.360info.org/page/terms">360info’s Terms of Use</a>.</p>
<h4 id="get-the-data-and-code" class="anchored">Get the data and code</h4>
<p>Visit the <a href="https://github.com/360-info/report-template/tree/main/data">GitHub repository</a> to:</p>
<ul>
<li><a href="https://github.com/360-info/report-template/tree/main/data"><strong>Download the data</strong></a></li>
<li><a href="https://github.com/360-info/report-template"><strong>Recreate or remix the chart</strong></a></li>
</ul>
</div>
</div>
</div>
</div>
<!-- notes dialog -->
<div id="modal-about" class="modal micromodal-slide" aria-hidden="true">
<div class="modal__overlay" tabindex="-1" data-micromodal-close="true">
<div class="modal__container" role="dialog" aria-modal="true" aria-labelledby="modal-about-title">
<button class="modal__close" aria-label="Close modal" data-micromodal-close="">
</button>
<header>
<h2 id="modal-about-title" class="anchored">About</h2>
</header>
<div id="modal-about-content">
<p>Data underpinning this map of Antarctica comes from three sources.<br><br> The map of the bedrock elevation and the land ice boundaries comes from the <a href="https://tc.copernicus.org/articles/7/375/2013/tc-7-375-2013.html">Bedmap2</a> project (<a href="https://doi.org/10.5194/tc-7-375-2013">Fretwell et al.&nbsp;2013</a>).<br><br> Data on the typical sea ice borders over the year for the 1981-2010 period come from the <a href="https://nsidc.org">National Sea and Ice Data Center</a>’s <a href="https://nsidc.org/data/g02135/versions/3">Sea Ice Index</a>.<br><br> The locations of Antarctic glaciers come from the NSIDC’s <a href="https://nsidc.org/data/nsidc-0272/versions/1">GLIMS Glacier Database</a>.</p>
</div>
</div>
</div>
</div>


<script type="ojs-module-contents">
eyJjb250ZW50cyI6W3sibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6InR1cmYgPSByZXF1aXJlKFwiQHR1cmYvdHVyZkA2LjUuMFwiKVxuRkEgPSBGaWxlQXR0YWNobWVudFxuXG4vLyB1c2UgdHVyZi5qcyB0byBtYWtlIHRoZSBnZW9qc29uIHdpbmRpbmcgb3JkZXIgY29tcGF0aWJsZSB3aXRoIGQzLmpzXG5hc3luYyBmdW5jdGlvbiBmaXhlZEdlb0pTT04oeCkge1xuICBjb25zdCByYXcgPSBhd2FpdCBGQSh4KS5qc29uKClcbiAgcmF3LmZlYXR1cmVzID0gcmF3LmZlYXR1cmVzLm1hcChmdW5jdGlvbihmKSB7XG4gICAgcmV0dXJuIHR1cmYucmV3aW5kKGYsIHsgcmV2ZXJzZTp0cnVlIH0pO1xuICB9KVxuICByZXR1cm4gcmF3XG59XG5cbi8vIGJlZEhlaWdodHMgPSBmaXhlZEdlb0pTT04oXCIvZGF0YS9iZWRtYXAyL2JlZG1hcDJfYmVkX2hlaWdodHMuZ2VvanNvblwiKVxuYmVkSGVpZ2h0cyA9IEZBKFwiL2RhdGEvYmVkbWFwMi9iZWRtYXAyX2JlZF9oZWlnaHRzLmdlb2pzb25cIikuanNvbigpXG5sYW5kSWNlT3V0bGluZSA9IGZpeGVkR2VvSlNPTihcIi9kYXRhL2JlZG1hcDIvYmVkbWFwMl9zdXJmYWNlX291dGxpbmUuZ2VvanNvblwiKVxuLy8gc2VhSWNlT3V0bGluZSA9IGZpeGVkR2VvSlNPTihcIi9kYXRhL25zaWRjL3NlYWljZV9tZWRpYW4uZ2VvanNvblwiKVxuZ2xhY2llclBvaW50cyA9IEZBKFwiL2RhdGEvbnNpZGMvZ2xhY2llcnMtYW50YXJjdGljYS5jc3ZcIikuY3N2KClcbnNlYUljZVJlZ2lvbnMgPSBGQShcIi9kYXRhL25zaWRjL3NlYWljZV9tZWRpYW5faHVsbHMuZ2VvanNvblwiKS5qc29uKClcblxuLy8gZmlsdGVyIHRoZSBzZWEgaWNlIHJlZ2lvbnMgb24gYSB0aW1lclxuY3VycmVudFNlYUljZVJlZ2lvbiA9ICh7XG4gIC4uLnNlYUljZVJlZ2lvbnMsXG4gIGZlYXR1cmVzOiBzZWFJY2VSZWdpb25zLmZlYXR1cmVzLmZpbHRlcihcbiAgICAgIGQgPT4gcGFyc2VJbnQoZC5wcm9wZXJ0aWVzLm1vbnRoKSA9PSBtb250aFRpbWVyICsgMSlcbn0pXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTIiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJjb21tZW50cyA9IFtcbiAgICBtZGBXaGVuIHlvdSB0aGluayBvZiBBbnRhcmN0aWNhLCB5b3UgcHJvYmFibHkgdGhpbmsgb2YgaXRzIGljZS4gQnV0IHVuZGVybmVhdGggaXMgYSBjb250aW5lbnQsIHdpdGggcm9jayByaXNpbmcgYWJvdmUgc2VhIGxldmVsLmAsXG4gICAgbWRgQSBzaGVldCBvZiBpY2Ugc2l0cyBvdmVyIG5lYXJseSBhbGwgb2YgdGhlIGxhbmQsIGFzIHdlbGwgYXMgc29tZSBvZiB0aGUgc2hhbGxvdyB3YXRlcnMg4oCUIGtpbG9tZXRyZXMgdGhpY2sgaW4gbWFueSBwbGFjZXMuYCxcbiAgICBtZGBUaGUgbWFzc2l2ZSBpY2Ugc2hlZXQgaXNu4oCZdCBzdGlsbOKAlGl0IHZlcnkgc2xvd2x5IGZsb3dzIGludG8gdGhlIHNlYSBpbiByaXZlcnMgY2FsbGVkIGdsYWNpZXJzLjxicj48YnI+TkFTQSBzYXlzIHRoYXQgbWVsdGluZyBvZiB0aGUgaWNlIHNoZWV0cyBoYXMgY29udHJpYnV0ZWQgdG8gb25lIHRoaXJkIG9mIHRoZSBzZWEgcmlzZSB3ZSd2ZSBzZWVuIHNpbmNlIDE5OTMuYCxcbiAgICBtZGBNb3N0IG9mIHRoZSBtZWx0IGN1cnJlbnRseSBjb21lcyBmcm9tIGFyZWFzIHdoZXJlIHBhcnQgb2YgdGhlIGljZSBzaGVldCBzaXRzIG92ZXIgdGhlIG9jZWFuLCBhcyBhIGJvb2tzaGVsZiBoYW5ncyBvbnRvIGEgd2FsbC48YnI+PGJyPlRoaXMgaXMgY2FsbGVkIGFuIGljZSBzaGVsZi4gSWNlIHNoZWx2ZXMgb2Z0ZW4gYWN0IGFzIHBsdWdzLCBob2xkaW5nIGdsYWNpZXJzIGluLmAsXG4gICAgbWRgUm9zcyBJY2UgU2hlbGYgYW5kIFJvbm5lIEljZSBTaGVsZiBhcmUgdHdvIG9mIHRoZSBiaWdnZXN0LCBidXQgc21hbGxlciBvbmVzIGhhbmcgYWxsIGFyb3VuZCB0aGUgZWRnZSBvZiBBbnRhcmN0aWNhLmAsXG4gICAgbWRgTW9kZWxsaW5nIGhhcyBmb3VuZCB0aGF0IGdsYWNpYWwgaWNlIGZsb3dpbmcgaW50byB0aGUgQW11bmRzZW4gU2VhIGlzIHZ1bG5lcmFibGUgdG8gd2FybWluZywgYW5kIHRoYXQgaXRzIG1lbHQgY291bGQgZGVzdGFiaWxpc2UgbGFyZ2VyIGFyZWFzLjxicj48YnI+IFRod2FpdGVzIGdsYWNpZXIgYWxvbmUgY291bGQgZXZlbnR1YWxseSByYWlzZSBzZWEgbGV2ZWxzIGJ5IDY1Y20gaWYgdGhlIGljZSBzaGVsZiBob2xkaW5nIGl0IGJhY2sgY29sbGFwc2VzLmAsXG4gICAgbWRgVGhpbm5lciBpY2UgYWxzbyBmb3JtcyBvbiB0aGUgd2F0ZXJzIHN1cnJvdW5kaW5nIEFudGFyY3RpY2EuIFRoaXMgc2VhIGljZSBncm93cyBpbiB0aGUgd2ludGVyIGFuZCBzaHJpbmtzIGluIHRoZSBzdW1tZXIuYCxcbiAgICBtZGBBbHRob3VnaCB0aGUgc2VhIGljZSBjb3ZlcnMgYSBsYXJnZSBhcmVhLCBpdCBkb2VzIG5vdCBkaXJlY3RseSBpbmZsdWVuY2Ugc2VhIHJpc2UsIGFzIGl0IGFscmVhZHkgcmVzdHMgb24gdGhlIHdhdGVyLjxicj48YnI+QnV0IHRoZSBzZWEgaWNlIGRvZXMgcHJvdGVjdCB0aGUgaWNlIHNoZWV0IGZyb20gYmVpbmcgYmF0dGVyZWQgYnkgdGhlIG9jZWFuIGFuZCB3aW5kcy5gLFxuICAgIG1kYFRoZSBzZWEgaWNlIHdhcyBzdGFibGUgdW50aWwgMjAxNiwgd2hlbiBpdCBzdGFydGVkIHNocmlua2luZy48YnI+PGJyPlNjaWVudGlzdHMgd2FudCB0byB1bmRlcnN0YW5kIHRoaXMgc3VkZGVuIHJldmVyc2FsIGJlZm9yZSB0aGUgc2VhIGljZSBtZWx0cyBmdXJ0aGVyIGFuZCBleHBvc2VzIG1vcmUgb2YgdGhlIGljZSBzaGVldC5gXG5dXG5jb21tZW50c1tzdG9yeVN0ZXBdXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTMiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJcbnZpZXdvZiBzdG9yeVN0ZXAgPSBJbnB1dHMuYnV0dG9uKFxuICBbXG4gICAgW1wi4oaSXCIsXG4gICAgICB2YWx1ZSA9PiB7XG4gICAgICAgIGNvbnN0IG1heFZhbCA9IGNvbW1lbnRzLmxlbmd0aDtcbiAgICAgICAgaWYgKHZhbHVlID09IG1heFZhbCAtIDIpIHtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIkRpc2FibGluZyBidXR0b24gYWZ0ZXIgdGhpcyBjbGlja1wiLCB0aGlzKVxuICAgICAgICAgIHRoaXMuZGlzYWJsZWQgPSB0cnVlXG4gICAgICAgICAgZG9jdW1lbnRcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiI2FkdmFuY2UtYnV0dG9ucyBidXR0b246Zmlyc3QtY2hpbGRcIilcbiAgICAgICAgICAgIC5kaXNhYmxlZCA9IHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIkVuYWJsaW5nIGJ1dHRvblwiLCB0aGlzKVxuICAgICAgICAgIGRvY3VtZW50XG4gICAgICAgICAgICAucXVlcnlTZWxlY3RvcihcIiNhZHZhbmNlLWJ1dHRvbnMgYnV0dG9uOmZpcnN0LWNoaWxkXCIpXG4gICAgICAgICAgICAuZGlzYWJsZWQgPSBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZSA8IG1heFZhbCAtIDEgPyB2YWx1ZSArIDEgOiB2YWx1ZVxuICAgICAgfVxuICAgIF0sXG4gICAgW1wi4oapXCIsXG4gICAgICAoKSA9PiB7XG4gICAgICAgIGRvY3VtZW50XG4gICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIjYWR2YW5jZS1idXR0b25zIGJ1dHRvbjpmaXJzdC1jaGlsZFwiKVxuICAgICAgICAgIC5kaXNhYmxlZCA9IGZhbHNlXG4gICAgICAgIHJldHVybiAwXG4gICAgICB9XG4gICAgXSxcbiAgXSwge1xuICAgIHZhbHVlOiAwLFxuICAgIGlkOiBcInN0b3J5U3RlcHNCdG5zXCJcbiAgfSlcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNCIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IlxuYW50YXJjdGljTWFwID0gUGxvdC5wbG90KHtcbiAgLy8gcHJvamVjdGlvbjogXCJlcXVhbC1lYXJ0aFwiLFxuICAvLyBwcm9qZWN0aW9uOiB7dHlwZTogXCJvcnRob2dyYXBoaWNcIiwgcm90YXRlOiBbMCwgLTMwLCAyMF19LFxuICBwcm9qZWN0aW9uOiAoe3dpZHRoLCBoZWlnaHR9KSA9PiBkMy5nZW9BemltdXRoYWxFcXVpZGlzdGFudCgpXG4gICAgLnJvdGF0ZShbMCwgOTBdKVxuICAgIC50cmFuc2xhdGUoW3dpZHRoIC8gMiwgaGVpZ2h0IC8gMl0pXG4gICAgLnNjYWxlKHdpZHRoIC8gMS4wNSlcbiAgICAuY2xpcEFuZ2xlKDQwKSxcbiAgY29sb3I6IHtcbiAgICB0eXBlOiBcIm9yZGluYWxcIixcbiAgICByYW5nZTogW1xuICAgICAgICBcIiMwODQ1OTRcIixcbiAgICAgICAgXCIjMjE3MWI1XCIsXG4gICAgICAgIFwiIzQyOTJjNlwiLFxuICAgICAgICBcIiM2YmFlZDZcIixcbiAgICAgICAgXCIjOWVjYWUxXCIsXG4gICAgICAgIFwiI2M2ZGJlZlwiLFxuICAgICAgICAvLyBcIiNlZmYzZmZcIixcbiAgICAgICAgXCIjZWZmYWZmXCIsXG4gICAgICAgIFwiI2ZlYzQ0ZlwiLFxuICAgICAgICBcIiNlYzcwMTRcIixcbiAgICAgICAgXCIjY2M0YzAyXCIsXG4gICAgICAgIFwiIzk5MzQwNFwiXG4gICAgICAgIF0sXG4gICAgbGVnZW5kOiB0cnVlLFxuICAgIHN3YXRjaFdpZHRoOiAyNVxuICB9LFxuICBtYXJrczogW1xuICAgIHBhdHRlcm4sXG4gICAgUGxvdC5nZW8oYmVkSGVpZ2h0cywge1xuICAgICAgZmlsbDogZCA9PiBkLnByb3BlcnRpZXMuaGkgLyAxMDAwLFxuICAgICAgZmlsbE9wYWNpdHk6IDAuNzUsXG4gICAgICBzdHJva2U6IG51bGwsXG4gICAgICBhcmlhRGVzY3JpcHRpb246IFwiQSBtYXAgc2hvd2luZyB0aGUgZWxldmF0aW9uIChvciBkZXB0aCwgd2hlcmUgaXQgaXMgYmVsb3cgc2VhIGxldmVsKSBvZiB0aGUgYmVkcm9jayBvZiBBbnRhcmN0aWNhLiBQYXJ0cyBvZiB0aGUgYmVkcm9jayBhcmUgb3ZlciB0d28ga2lsb21ldHJlcyBhYm92ZSBzZWEgbGV2ZWwuXCJcbiAgICB9KSxcbiAgICBQbG90LnRleHQobGFiZWxDb250aW5lbnRzLCB7XG4gICAgICBhcmlhSGlkZGVuOiBcInRydWVcIixcbiAgICAgIHRleHQ6IFwidFwiLFxuICAgICAgeDogXCJ4XCIsXG4gICAgICB5OiBcInlcIixcbiAgICAgIGZpbGw6IFwibGlnaHRncmV5XCIsXG4gICAgICBsaW5lV2lkdGg6IDEyLFxuICAgICAgZm9udFNpemU6IDE4LFxuICAgICAgZm9udEZhbWlseTogXCJSb2JvdG8gQ29uZGVuc2VkXCIsXG4gICAgICBmb250U3R5bGU6IFwiaXRhbGljXCJcbiAgICB9KSxcbiAgICAvKiB0aGVyZSdzIHNvbWUgY29tcGxleGl0eSBoZXJlIHdpdGggZHVwbGljYXRlIGxheWVycyBhcyB0aGUgbGF5ZXJzIHRoYXRcbiAgICAgICBmYWRlIGluIGNhbid0IGJlIGRpc3BsYXllZCBhdCB0aGUgc2FtZSB0aW1lIGFzIHRoZSBvbmVzIHRoYXQgYW5pbWF0ZVxuICAgICAgIG9uIHRoZSB0aW1lciAocmVuZGVyIHRyYW5zZm9ybSBsaW1pdGF0aW9uKSAqL1xuICAgIHN0b3J5U3RlcCA+PSAxICYmIHN0b3J5U3RlcCA8PSA1ID8gbGFuZEljZU91dGxpbmVMYXllcldpdGhGYWRlIDogbnVsbCxcbiAgICBzdG9yeVN0ZXAgPT0gMiA/IGdsYWNpZXJQb2ludExheWVyV2l0aEZhZGUgOiBudWxsLFxuICAgIHN0b3J5U3RlcCA9PSAzIHx8IHN0b3J5U3RlcCA9PSA0ID8gaWNlU2hlbGZBcnJvd0xheWVyV2l0aEZhZGUgOiBudWxsLFxuICAgIHN0b3J5U3RlcCA9PSAzIHx8IHN0b3J5U3RlcCA9PSA0ID8gaWNlU2hlbGZMYWJlbExheWVyV2l0aEZhZGUgOiBudWxsLFxuICAgIHN0b3J5U3RlcCA9PSA1ID8gdGh3YWl0ZXNHbGFjaWVyUG9pbnRMYXllcldpdGhGYWRlIDogbnVsbCxcbiAgICBzdG9yeVN0ZXAgPT0gNSA/IHRod2FpdGVzR2xhY2llckFycm93TGF5ZXJXaXRoRmFkZSA6IG51bGwsXG4gICAgc3RvcnlTdGVwID09IDUgPyB0aHdhaXRlc0dsYWNpZXJMYWJlbExheWVyV2l0aEZhZGUgOiBudWxsLFxuICAgIHN0b3J5U3RlcCA+PSA2ID8gc2VhSWNlUmVnaW9uTGF5ZXIgOiBudWxsLFxuICAgIHN0b3J5U3RlcCA+PSA2ID8gbGFuZEljZU91dGxpbmVMYXllciA6IG51bGwsXG4gICAgc3RvcnlTdGVwID49IDYgPyBzZWFJY2VMYWJlbExheWVyIDogbnVsbCxcbiAgXSxcbiAgaGVpZ2h0OiA4MDAsXG4gIGluc2V0VG9wOiAwXG59KVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC01IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoibGFuZEljZU91dGxpbmVMYXllcldpdGhGYWRlID0gUGxvdC5nZW8obGFuZEljZU91dGxpbmUsIHtcbiAgZmlsbDogXCJ1cmwoI3N0cmlwZXMpXCIsXG4gIHN0cm9rZTogXCIjMzMzMzMzXCIsXG4gIHN0cm9rZVdpZHRoOiAxLFxuICBmaWxsT3BhY2l0eTogMC43NSxcbiAgcmVuZGVyOiBmYWRlTGF5ZXJJbixcbiAgYXJpYURlc2NyaXB0aW9uOiBcIkFuIG91dGxpbmUgb2YgdGhlIHBhcnRzIG9mIEFudGFyY3RpY2EgY292ZXJlZCB3aXRoIGljZS4gVGhpcyBpcyB0eXBpY2FsbHkgdGhlIG91dGxpbmUgeW91IHNlZSBvbiBtYXBzLlwiXG59KVxubGFuZEljZU91dGxpbmVMYXllciA9IFBsb3QuZ2VvKGxhbmRJY2VPdXRsaW5lLCB7XG4gIGZpbGw6IFwidXJsKCNzdHJpcGVzKVwiLFxuICBzdHJva2U6IFwiIzMzMzMzM1wiLFxuICBzdHJva2VXaWR0aDogMSxcbiAgZmlsbE9wYWNpdHk6IDAuNzUsXG4gIGFyaWFIaWRkZW46IHRydWVcbn0pXG5pY2VTaGVsZkFycm93TGF5ZXJXaXRoRmFkZSA9IFBsb3QuYXJyb3cobGFiZWxTaGVsdmVzLCB7XG4gIHgxOiBcInhmcm9tXCIsXG4gIHkxOiBcInlmcm9tXCIsXG4gIHgyOiBcInh0b1wiLFxuICB5MjogXCJ5dG9cIixcbiAgYmVuZDogdHJ1ZSxcbiAgc3Ryb2tlOiBcIm5hdnlcIixcbiAgc3Ryb2tlV2lkdGg6IDMsXG4gIHJlbmRlcjogZmFkZUxheWVySW4sXG4gIGFyaWE6IHRydWVcbn0pXG5pY2VTaGVsZkxhYmVsTGF5ZXJXaXRoRmFkZSA9IFBsb3QudGV4dChsYWJlbFNoZWx2ZXMsIHtcbiAgdGV4dDogZCA9PiBkLnQudG9VcHBlckNhc2UoKSxcbiAgeDogXCJ4ZnJvbVwiLFxuICB5OiBkID0+IGQueWZyb20gKyAyLjUsIC8vIHNoaWZ0IGxhYmVscyBvdXR3YXJkLCBub3QgdXAvZG93blxuICBzdHJva2U6IFwibGlnaHRjeWFuXCIsXG4gIGZpbGw6IFwibmF2eVwiLFxuICBzdHJva2VXaWR0aDogNCxcbiAgZm9udFNpemU6IDI0LFxuICBmb250RmFtaWx5OiBcIlJvYm90byBDb25kZW5zZWRcIixcbiAgZm9udFdlaWdodDogXCJib2xkXCIsXG4gIGxpbmVXaWR0aDogMTUsXG4gIHJlbmRlcjogZmFkZUxheWVySW4sXG4gIGFyaWFMYWJlbDogZCA9PiBkLnRcbn0pXG5nbGFjaWVyUG9pbnRMYXllcldpdGhGYWRlID0gUGxvdC5kb3QoZ2xhY2llclBvaW50cywge1xuICB4OiBcImxvblwiLFxuICB5OiBcImxhdFwiLFxuICByOiAyLjUsXG4gIC8vIG9wYWNpdHk6IDAuNzUsXG4gIGZpbGw6IFwicmVkXCIsXG4gIHN0cm9rZTogXCIjMDAwMDAwOTlcIixcbiAgc3Ryb2tlV2lkdGg6IDAuNSxcbiAgcmVuZGVyOiBmYWRlTGF5ZXJJbixcbiAgYXJpYURlc2NyaXB0aW9uOiBcIlBvaW50cyBhcm91bmQgdGhlIGVkZ2VzIG9mIEFudGFyY3RpYyBtYXJraW5nIGdsYWNpZXJzOiBzbG93LW1vdmluZyByaXZlcnMgb2YgaWNlLlwiXG59KVxudGh3YWl0ZXNHbGFjaWVyUG9pbnRMYXllcldpdGhGYWRlID0gUGxvdC5kb3QoXG4gIFt7IGxvbjogLTEwNi43NSwgbGF0OiAtNzUuNSB9XSwge1xuICB4OiBcImxvblwiLFxuICB5OiBcImxhdFwiLFxuICByOiA0LjUsXG4gIGZpbGw6IFwibmF2eVwiLFxuICBzdHJva2U6IFwibGlnaHRjeWFuXCIsXG4gIHN0cm9rZVdpZHRoOiAwLjUsXG4gIHN5bWJvbDogXCJ0cmlhbmdsZVwiLFxuICByZW5kZXI6IGZhZGVMYXllckluLFxuICBhcmlhSGlkZGVuOiB0cnVlXG59KVxudGh3YWl0ZXNHbGFjaWVyQXJyb3dMYXllcldpdGhGYWRlID0gUGxvdC5hcnJvdyhsYWJlbFRod2FpdGVzLCB7XG4gIHgxOiBcInhmcm9tXCIsXG4gIHkxOiBcInlmcm9tXCIsXG4gIHgyOiBkID0+IGQueHRvIC0gMy41LFxuICB5MjogXCJ5dG9cIixcbiAgYmVuZDogdHJ1ZSxcbiAgc3Ryb2tlOiBcIm5hdnlcIixcbiAgc3Ryb2tlV2lkdGg6IDMsXG4gIHJlbmRlcjogZmFkZUxheWVySW4sXG4gIGFyaWFMYWJlbDogZCA9PiBkLnRcbn0pXG50aHdhaXRlc0dsYWNpZXJMYWJlbExheWVyV2l0aEZhZGUgPSBQbG90LnRleHQobGFiZWxUaHdhaXRlcywge1xuICB0ZXh0OiBkID0+IGQudC50b1VwcGVyQ2FzZSgpLFxuICB4OiBkID0+IGQueGZyb20gLSAyLjUsXG4gIHk6IFwieWZyb21cIiwgLy8gc2hpZnQgbGFiZWxzIG91dHdhcmQsIG5vdCB1cC9kb3duXG4gIHRleHRBbmNob3I6IFwiZW5kXCIsXG4gIHN0cm9rZTogXCJsaWdodGN5YW5cIixcbiAgZmlsbDogXCJuYXZ5XCIsXG4gIHN0cm9rZVdpZHRoOiA0LFxuICBmb250U2l6ZTogMTgsXG4gIGZvbnRGYW1pbHk6IFwiUm9ib3RvIENvbmRlbnNlZFwiLFxuICBmb250V2VpZ2h0OiBcImJvbGRcIixcbiAgbGluZVdpZHRoOiAxMCxcbiAgcmVuZGVyOiBmYWRlTGF5ZXJJbixcbiAgYXJpYUhpZGRlbjogdHJ1ZVxufSlcbnNlYUljZVJlZ2lvbkxheWVyID0gUGxvdC5nZW8oY3VycmVudFNlYUljZVJlZ2lvbiwge1xuICBmaWxsOiBcIiNkZGRkZGRcIixcbiAgc3Ryb2tlOiBcIiNlZWVlZWVcIixcbiAgc3Ryb2tlV2lkdGg6IDEsXG4gIGZpbGxPcGFjaXR5OiAwLjY1LFxuICBhcmlhSGlkZGVuOiB0cnVlXG59KVxuc2VhSWNlTGFiZWxMYXllciA9IFBsb3QudGV4dChsYWJlbFNlYUljZSxcbntcbiAgdGV4dDogZCA9PiBkLnQudG9VcHBlckNhc2UoKSxcbiAgeDogXCJ4XCIsXG4gIHk6IFwieVwiLFxuICB0ZXh0QW5jaG9yOiBcInN0YXJ0XCIsXG4gIHN0cm9rZTogXCJ3aGl0ZVwiLFxuICBmaWxsOiBcIiM2NjY2NjZcIixcbiAgc3Ryb2tlV2lkdGg6IDQsXG4gIGZvbnRTaXplOiAyNCxcbiAgZm9udEZhbWlseTogXCJSb2JvdG8gQ29uZGVuc2VkXCIsXG4gIGZvbnRXZWlnaHQ6IFwiYm9sZFwiLFxuICBsaW5lV2lkdGg6IDIwLFxuICBhcmlhTGFiZWw6IGQgPT4gZC50XG59KVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC02IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoibGFiZWxTaGVsdmVzID0gW1xuICB7IFxuICAgIHQ6IFwiUm9zcyBJY2UgU2hlbGZcIixcbiAgICB4ZnJvbTogLTE2NS42MjUyNDUsXG4gICAgeWZyb206IC03MC42MzkxOTcsXG4gICAgeHRvOiAtMTc2LjQ2MzU2MCxcbiAgICB5dG86IC04MC4zOTk2OTBcbiAgfSwge1xuICAgIHQ6IFwiUm9ubmUgSWNlIFNoZWxmXCIsXG4gICAgeGZyb206IC00My44ODQzMzIsXG4gICAgeWZyb206IC03Mi4xMTAwMTUsXG4gICAgeHRvOiAtNjguODg0MzMyLFxuICAgIHl0bzogLTgwLjExMDAxNVxuICB9XG5dXG5cbmxhYmVsVGh3YWl0ZXMgPSBbXG4gIHsgXG4gICAgdDogXCJUaHdhaXRlcyBnbGFjaWVyICYgaWNlIHNoZWxmXCIsXG4gICAgeGZyb206IC0xMjMuNzUsXG4gICAgeWZyb206IC03MyxcbiAgICB4dG86IC0xMDYuNzUsXG4gICAgeXRvOiAtNzUuNVxuICB9XG5dXG5cbmxhYmVsQ29udGluZW50cyA9IFtcbiAge1xuICAgIHg6IDEzNSxcbiAgICB5OiAtNTMuNSxcbiAgICB0OiBcIkFVU1RSQUxJQVwiXG4gIH0sXG4gIHtcbiAgICB4OiAyNSxcbiAgICB5OiAtNTUsXG4gICAgdDogXCJBRlJJQ0FcIlxuICB9LFxuICB7XG4gICAgeDogLTQ1LFxuICAgIHk6IC01Mi41LFxuICAgIHQ6IFwiU09VVEhcXG5BTUVSSUNBXCJcbiAgfSxcbl1cbm1vbnRocyA9IFtcIkphbnVhcnlcIiwgXCJGZWJydWFyeVwiLCBcIk1hcmNoXCIsIFwiQXByaWxcIiwgXCJNYXlcIiwgXCJKdW5lXCIsIFwiSnVseVwiLFxuICBcIkF1Z3VzdFwiLCBcIlNlcHRlbWJlclwiLCBcIk9jdG9iZXJcIiwgXCJOb3ZlbWJlclwiLCBcIkRlY2VtYmVyXCJdXG5sYWJlbFNlYUljZSA9IFtcbiAge1xuICAgIHg6IC0xMjMsXG4gICAgeTogLTU1LjUsXG4gICAgdDogYFR5cGljYWwgc2VhIGljZSBpbiAke21vbnRoc1ttb250aFRpbWVyXX1gXG4gIH1cbl1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Ii8vIHRoaXMgcmVuZGVyIHRyYW5zZm9ybSBmYWRlcyBsYXllcnMgaW4gKGJ1dCBub3Qgb3V0KVxuZmFkZUxheWVySW4gPSAoaSwgcywgdiwgZCwgYywgbmV4dCkgPT4ge1xuICAvLyBpbmRleCwgc2NhbGVzLCB2YWx1ZXMsIGRpbWVuc2lvbnMsIGNvbnRleHQsIG5leHRcbiAgLy8gY29uc29sZS5sb2coXCJ2YWx1ZXNcIiwgdilcbiAgY29uc3QgbWFya3MgPSBuZXh0KGksIHMsIHYsIGQsIGMpXG4gIGNvbnNvbGUubG9nKFwibWFya3NcIiwgbWFya3MpXG4gIGNvbnN0IHN2ZyA9IGMub3duZXJTVkdFbGVtZW50XG4gIC8vIGNvbnNvbGUubG9nKFwiT3duaW5nIFNWRzpcIiwgc3ZnKVxuICBkM1xuICAgIC5zZWxlY3QobWFya3MpXG4gICAgLnN0eWxlKFwib3BhY2l0eVwiLCAwKVxuICAgIC50cmFuc2l0aW9uKClcbiAgICAuZHVyYXRpb24oNzUwKVxuICAgIC5lYXNlKGQzLmVhc2VMaW5lYXIpXG4gICAgLnN0eWxlKFwib3BhY2l0eVwiLCAxKVxuICByZXR1cm4gbWFya3Ncbn1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtOCIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im1vbnRoVGltZXIgPSB7XG4gIGxldCBpID0gMFxuICB5aWVsZCBpXG4gIHdoaWxlKHN0b3J5U3RlcCA+PSA2KSB7XG4gICAgeWllbGQgUHJvbWlzZXMudGljaygyNTApLnRoZW4oKCkgPT4gaSsrICUgMTIpXG4gIH1cbn1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtOSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6InBhdHRlcm4gPSAoKSA9PiBzdmdgPGRlZnM+PHBhdHRlcm4gaWQ9XCJzdHJpcGVzXCIgd2lkdGg9XCIxMDBcIiBoZWlnaHQ9XCIxMDBcIiBwYXR0ZXJuVW5pdHM9XCJ1c2VyU3BhY2VPblVzZVwiIHN0cm9rZT1cIiMzMzMzMzM5OVwiIHN0cm9rZS13aWR0aD1cIjFcIj48bGluZSB4MT1cIi01My4wM1wiIHkxPVwiNTMuMDNcIiB4Mj1cIjUzLjAzXCIgeTI9XCItNTMuMDNcIi8+PGxpbmUgeDE9XCItNDcuNDhcIiB5MT1cIjU4LjU5XCIgeDI9XCI1OC41OVwiIHkyPVwiLTQ3LjQ4XCIvPjxsaW5lIHgxPVwiLTQxLjkyXCIgeTE9XCI2NC4xNFwiIHgyPVwiNjQuMTRcIiB5Mj1cIi00MS45MlwiLz48bGluZSB4MT1cIi0zNi4zN1wiIHkxPVwiNjkuN1wiIHgyPVwiNjkuN1wiIHkyPVwiLTM2LjM3XCIvPjxsaW5lIHgxPVwiLTMwLjgxXCIgeTE9XCI3NS4yNlwiIHgyPVwiNzUuMjZcIiB5Mj1cIi0zMC44MVwiLz48bGluZSB4MT1cIi0yNS4yNlwiIHkxPVwiODAuODFcIiB4Mj1cIjgwLjgxXCIgeTI9XCItMjUuMjZcIi8+PGxpbmUgeDE9XCItMTkuN1wiIHkxPVwiODYuMzdcIiB4Mj1cIjg2LjM3XCIgeTI9XCItMTkuN1wiLz48bGluZSB4MT1cIi0xNC4xNFwiIHkxPVwiOTEuOTJcIiB4Mj1cIjkxLjkyXCIgeTI9XCItMTQuMTRcIi8+PGxpbmUgeDE9XCItOC41OVwiIHkxPVwiOTcuNDhcIiB4Mj1cIjk3LjQ4XCIgeTI9XCItOC41OVwiLz48bGluZSB4MT1cIi0zLjAzXCIgeTE9XCIxMDMuMDNcIiB4Mj1cIjEwMy4wM1wiIHkyPVwiLTMuMDNcIi8+PGxpbmUgeDE9XCIyLjUyXCIgeTE9XCIxMDguNTlcIiB4Mj1cIjEwOC41OVwiIHkyPVwiMi41MlwiLz48bGluZSB4MT1cIjguMDhcIiB5MT1cIjExNC4xNFwiIHgyPVwiMTE0LjE0XCIgeTI9XCI4LjA4XCIvPjxsaW5lIHgxPVwiMTMuNjNcIiB5MT1cIjExOS43XCIgeDI9XCIxMTkuN1wiIHkyPVwiMTMuNjNcIi8+PGxpbmUgeDE9XCIxOS4xOVwiIHkxPVwiMTI1LjI2XCIgeDI9XCIxMjUuMjZcIiB5Mj1cIjE5LjE5XCIvPjxsaW5lIHgxPVwiMjQuNzRcIiB5MT1cIjEzMC44MVwiIHgyPVwiMTMwLjgxXCIgeTI9XCIyNC43NFwiLz48bGluZSB4MT1cIjMwLjNcIiB5MT1cIjEzNi4zN1wiIHgyPVwiMTM2LjM3XCIgeTI9XCIzMC4zXCIvPjxsaW5lIHgxPVwiMzUuODZcIiB5MT1cIjE0MS45MlwiIHgyPVwiMTQxLjkyXCIgeTI9XCIzNS44NlwiLz48bGluZSB4MT1cIjQxLjQxXCIgeTE9XCIxNDcuNDhcIiB4Mj1cIjE0Ny40OFwiIHkyPVwiNDEuNDFcIi8+PGxpbmUgeDE9XCI0Ni45N1wiIHkxPVwiMTUzLjAzXCIgeDI9XCIxNTMuMDNcIiB5Mj1cIjQ2Ljk3XCIvPjwvcGF0dGVybj48L2RlZnM+YFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xMCIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im1pY3JvID0gcmVxdWlyZShcIm1pY3JvbW9kYWxAMC40LjEwXCIpXG5taWNyby5pbml0KHtcbiAgYXdhaXRPcGVuQW5pbWF0aW9uOiB0cnVlLFxuICBhd2FpdENsb3NlQW5pbWF0aW9uOiB0cnVlXG59KTtcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoic2hpbnlJbnB1dCgnc3RvcnlTdGVwJykifV19
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../../antarctic-map";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "..";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
  tabsets.forEach(function(tabset) {
    const tabby = new Tabby('#' + tabset.id);
  });
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'light-border',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>




</body></html>